<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>äºˆå®šã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨ä¸€è¦§</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <h1>ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h1>
        <a href="{{ url_for('reminder.register') }}" class="add-button">ï¼‹ æ–°ã—ã„äºˆå®šã‚’ç™»éŒ²</a>

        <div id="calendar" style="margin-bottom: 40px;"></div>

        <h2>ğŸ“„ äºˆå®šä¸€è¦§ï¼ˆçµã‚Šè¾¼ã¿ï¼‰</h2>
        <form action="{{ url_for('reminder.filter') }}" method="post">
            <label>ã‚«ãƒ†ã‚´ãƒª</label>
            <select name="category">
                <option value="">ã™ã¹ã¦</option>
                <option value="ä»•äº‹">ä»•äº‹</option>
                <option value="å€‹äºº">å€‹äºº</option>
                <option value="å‹‰å¼·">å‹‰å¼·</option>
                <option value="å¥åº·">å¥åº·</option>
                <option value="æœªåˆ†é¡">æœªåˆ†é¡</option>
            </select>

            <label>é€šçŸ¥çŠ¶æ³</label>
            <select name="notified">
                <option value="">ã™ã¹ã¦</option>
                <option value="0">æœªé€šçŸ¥</option>
                <option value="1">é€šçŸ¥æ¸ˆ</option>
            </select>

            <button type="submit">çµã‚Šè¾¼ã‚€</button>
        </form>

        <ul>
            {% for event in events %}
            <li class="event-item {{ event[5] }}">
                <strong>{{ event[0] }}</strong><br>
                å®Ÿè¡Œæ—¥æ™‚ï¼š{{ event[2] }}<br>
                é€šçŸ¥äºˆå®šï¼š{{ event[3] }}<br>
                <small>ã‚«ãƒ†ã‚´ãƒªï¼š{{ event[5] }} / é€šçŸ¥æ¸ˆã¿ï¼š{{ 'ã¯ã„' if event[7] else 'ã„ã„ãˆ' }}</small><br>
                <small>{{ event[1] }}</small><br>
                <form action="{{ url_for('reminder.edit_event', event_id=event[4]) }}" method="get"
                    style="display:inline;">
                    <button type="submit">ç·¨é›†</button>
                </form>
                <form action="{{ url_for('reminder.delete_event', event_id=event[4]) }}" method="post"
                    style="display:inline;">
                    <button type="submit">å‰Šé™¤</button>
                </form>
            </li>
            {% else %}
            <li>äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“ã€‚</li>
            {% endfor %}
        </ul>

        <p><a href="{{ url_for('reminder.index') }}">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                locale: 'ja',
                events: '/api/events'
            });
            calendar.render();
        });
    </script>
</body>

</html>