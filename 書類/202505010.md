# 学習支援リマインダーシステム ドキュメント
**最終更新日:** 2025-05-10 10:25:19

---

## 📌 システム概要
このアプリケーションは、学習者の学習計画や予定、進捗管理を支援するために開発されたWebベースのリマインダーシステムです。  
Raspberry Pi 上で常時稼働し、Apache + mod_wsgi環境での運用を想定しています。

---

## 🛠 使用技術・環境

| 項目 | 内容 |
|------|------|
| 言語 | Python 3.x |
| フレームワーク | Flask |
| DB | SQLite3 |
| UI | HTML / CSS / JavaScript |
| グラフ描画 | Chart.js |
| カレンダーUI | FullCalendar |
| 通知 | logファイル記録 (メール/デスクトップ通知は未実装) |
| スケジューリング | APScheduler（予定） |
| 実行環境 | Raspberry Pi OS 上での動作を前提 |

---

## 📁 ディレクトリ構成

```
REMINDER-APP/
├── app.py                         # アプリ本体
├── database.db                   # SQLite3 データベース
├── create_study_tables.py       # 学習ログ用テーブル作成
├── create_todo_table.py         # ToDo用テーブル作成
├── alter_db.py                  # DBスキーマ変更用
├── scheduler.py                 # 通知スケジューラ（未使用/開発中）
├── test_mail.py                 # メール送信確認スクリプト
├── README.md                    # ドキュメント
├── logs/
│   ├── action.log               # 各種アクションの記録
│   └── notify.log               # 通知記録ログ
├── static/
│   └── style.css                # スタイルシート
├── templates/
│   ├── index.html               # ホームメニュー画面
│   ├── calendar.html           # カレンダー＋予定一覧画面
│   ├── register.html           # 新規予定登録画面
│   ├── edit.html               # 予定編集画面
│   ├── materials.html          # 教材一覧画面
│   ├── edit_material.html      # 教材編集画面
│   ├── timer.html              # 学習タイマー画面
│   ├── study_log.html          # 学習履歴表示＋グラフ
│   └── todo.html               # ToDoリスト画面
```

---

## 🔗 Flaskルーティング一覧

| ルート | 内容 |
|-------|------|
| `/` | ホームメニュー |
| `/calendar` | カレンダー＋予定一覧 |
| `/register` | 新しい予定登録 |
| `/edit/<int:event_id>` | 予定編集 |
| `/delete/<int:event_id>` | 予定削除 |
| `/filter` | カテゴリ・通知状態で予定を絞り込み |
| `/export/events` | 予定一覧をCSV形式で出力 |
| `/export/logs` | 通知ログをCSV形式で出力 |
| `/api/events` | FullCalendar用の予定データAPI |
| `/todo` | ToDoリスト表示 |
| `/todo/add` | ToDo追加 |
| `/todo/done/<int:todo_id>` | ToDo完了切り替え |
| `/todo/delete/<int:todo_id>` | ToDo削除 |
| `/materials` | 教材一覧表示・追加 |
| `/materials/edit/<int:material_id>` | 教材名の編集 |
| `/materials/delete/<int:material_id>` | 教材の削除 |
| `/timer` | 学習タイマー画面 |
| `/log_study` | 学習セッションの記録（POST） |
| `/study_log` | 学習履歴一覧と合計グラフ表示 |

---

## 📝 データベース概要

### events テーブル
| カラム名 | 内容 |
|----------|------|
| event_id | 主キー |
| user_id | 現在は常に1 |
| title | イベント名 |
| description | 詳細 |
| event_datetime | 実行日時 |
| remind_datetime | 通知予定日時 |
| category | カテゴリ（仕事、個人など） |
| repeat | 繰り返し有無（将来拡張予定） |
| notified | 通知済フラグ（0/1） |

### todos テーブル
| カラム名 | 内容 |
|----------|------|
| id | 主キー |
| title | ToDoのタイトル |
| is_done | 完了フラグ（0/1） |
| created_at | 作成日時（自動）|

### materials テーブル
| カラム名 | 内容 |
|----------|------|
| id | 主キー |
| name | 教材名（ユニーク制約） |

### study_sessions テーブル
| カラム名 | 内容 |
|----------|------|
| id | 主キー |
| material_id | 紐づく教材ID |
| start_time | 開始日時（ISO形式） |
| end_time | 終了日時（ISO形式） |
| duration | 所要時間（秒単位） |

---

## ✅ 実装済みの改善点
- 📄 予定画面とカレンダーを `/calendar` に分離し、`index.html` をメニュー画面化
- 🧠 学習時間グラフを分単位（小数）で表示するよう変更
- 📝 教材の編集・削除機能を追加
- 💾 ログファイル（action.log / notify.log）をCSVで出力可能

---

## 📌 今後の改善提案（メモ）

- 🔔 APSchedulerやcronでの定期通知機能（Web未使用時にも機能）
- 📧 SMTP通知送信機能（`test_mail.py`に実装例あり）
- 🔐 ログインユーザー機能（user_id=1 固定の解除）
- 💡 Vue.js でのUIリファクタリング

---

このファイルはプロジェクトルートに `README.md` または `system_overview.md` として保存してください。
